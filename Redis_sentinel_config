frontend Redis
    bind            *:6378 name redis
    mode            tcp
    log         global
    timeout client      30000
    default_backend     Redis_tcp_ipvANY

backend Redis_tcp_ipvANY
    mode            tcp
    timeout connect     30000
    timeout server      30000
    retries         3
    option tcp-check
    tcp-check connect
    tcp-check send PING\r\n
    tcp-check expect string +PONG
    tcp-check send info\ replication\r\n
    tcp-check expect string role:master
    tcp-check send QUIT\r\n
    tcp-check expect string +OK
    server          redis1 10.10.10.10:6379 check inter 1000  maxconn 1024
    server          redis2 10.10.10.11:6379 check inter 1000  maxconn 1024
    server          redis3 10.10.10.12:6379 check inter 1000  maxconn 1024
    
------------------------------------------- With AUTH --------------------------------------------------------------------
    
frontend Redis
    bind            *:6378 name redis
    mode            tcp
    log         global
    timeout client      30000
    default_backend     Redis_tcp_ipvANY

backend Redis_tcp_ipvANY
    mode            tcp
    timeout connect     30000
    timeout server      30000
    retries         3
    option tcp-check
    #uncomment these lines if you have basic auth
    #tcp-check send AUTH\ 123456\r\n
    #tcp-check expect +OK
    tcp-check connect
    tcp-check send AUTH\ YOUR_PASSWORD_HERE\r\n
    #tcp-check expect +OK
    tcp-check send PING\r\n
    tcp-check expect string +PONG
    tcp-check send info\ replication\r\n
    tcp-check expect string role:master
    tcp-check send QUIT\r\n
    tcp-check expect string +OK
    server          redis1 10.10.10.10:6379 check inter 1000  maxconn 1024
    server          redis2 10.10.10.11:6379 check inter 1000  maxconn 1024
    server          redis3 10.10.10.12:6379 check inter 1000  maxconn 1024
    
    
    ------------------------------------------- Redis Slave config ---------------------------------------------------------
    
frontend Redis-slave
    bind            *:6377 name redis-slave
    mode            tcp
    log         global
    timeout client      30000
    default_backend     Redis_tcp_ipvANY-slave

backend Redis_tcp_ipvANY-slave
    mode    tcp
    balance roundrobin
    timeout connect     30000
    timeout server      30000
    retries         3
    option tcp-check
    #uncomment these lines if you have basic auth
    #tcp-check send AUTH\ YOUR_PASSWORD_HERE\r\n
    #tcp-check expect +OK
    tcp-check connect
    tcp-check send AUTH\ 123456\r\n
    #tcp-check expect +OK
    tcp-check send PING\r\n
    tcp-check expect string +PONG
    tcp-check send info\ replication\r\n
    #tcp-check expect string role:slave
    tcp-check send QUIT\r\n
    tcp-check expect string +OK
    server          redis1 10.10.10.10:6379 check inter 1000  maxconn 1024
    server          redis2 10.10.10.11:6379 check inter 1000  maxconn 1024
    server          redis3 10.10.10.12:6379 check inter 1000  maxconn 1024

-----------------------------------------------------------------------------------------------------------------------------
